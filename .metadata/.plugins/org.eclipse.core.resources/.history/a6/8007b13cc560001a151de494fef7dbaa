package main;

import processing.core.PApplet;
import processing.core.PFont;
import controlP5.*;
import java.util.ArrayList;
import processing.core.PImage;

public class Main extends PApplet {
	
	private ControlP5 cp5;
	//arralist para registar usuarios 
	private ArrayList<User> Users = new ArrayList<User>();
	String info = "";
	Textfield username,password;
	Textfield usernameR,emailR,passwordR,cPasswordR;
	Button loginB,registerB;
	int pantalla;
	
	/// Imagenes interfaz 
	
	PImage login;
	PImage account;
	PImage home;
	PImage menuh;
	PImage history;
	PImage buy;
	PImage models;
	PImage model3;
	PImage modelx;
	PImage modely;
	PImage graphic;
	PImage checkout;
	PImage login2;
	
	/// Feedback  
	
	
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		PApplet.main("main.Main");;
	}
	public void settings() {
		size(375,667);
	}
	public void setup() {
		pantalla=0;
		// imagenes interfaces
		buy= loadImage("interfaz/buy.png");
		checkout= loadImage("interfaz/checkout..png");
		graphic= loadImage("interfaz/graphic.png");
		history= loadImage("interfaz/history.png");
		home= loadImage("interfaz/home.png");
		menuh= loadImage("interfaz/MenuH.png");
		models= loadImage("interfaz/models.png");
		model3= loadImage("interfaz/model3.png");
		modelx= loadImage("interfaz/modelx.png");
		modely= loadImage("interfaz/modely.png");
		account= loadImage("interfaz/account.png");
		login2= loadImage("interfaz/login2.png");
		
		Users.add(new User("test","test","test@test.com"));
		PFont font = createFont("arial",20);
		cp5 = new ControlP5(this);
		// campo de texto para usuario 
		username = cp5.addTextfield("username")
	     .setPosition(85,343)
	     .setSize(200,40)
	     .setFont(font)
	     .setColor(color(255,255,255))
	     ;
		// campo de texto para contraseña
		password = cp5.addTextfield("password")
	     .setPosition(85,400)
	     .setSize(200,40)
	     .setFont(font)
	    //contraeña asteriscos
	     .setPasswordMode(true)
	     .setColor(color(255,255,255))
	     ;
		// campo de texto para nombre de usuario registro
		usernameR =cp5.addTextfield("usernameR")
			     .setPosition(85,310)
			     .setSize(200,40)
			     .setFont(font)
			     .setColor(color(255,255,255))
			     .hide()
			     ;
		emailR = cp5.addTextfield("emailR")
			     .setPosition(85,374)
			     .setSize(200,40)
			     .setFont(font)
			     .setColor(color(255,255,255))
			     .hide()
			     ;
		passwordR = cp5.addTextfield("passwordR")
			     .setPosition(85,431)
			     .setSize(200,40)
			     .setFont(font)
			     .setColor(color(255,255,255))
			     .hide()
			     ;
		cPasswordR = cp5.addTextfield("cPasswordR")
			     .setPosition(85,492)
			     .setSize(200,40)
			     .setFont(font)
			     .setColor(color(255,255,255))
			     .hide()
			     ;
		//boton para login 
		loginB = cp5.addButton("Hola")
		.setValue(0)
		.setPosition(87,473)
		.setSize(200,40);
	}
	public void Hola(int Value){
		println("help");
		Boolean bol = true;
		
		for (int i = 0; i < this.Users.size(); i++) {
			User LogUser = this.Users.get(i);
			println(LogUser.getUsername()+username.getText()+LogUser.getPassword()+password.getText());
			// Compara entre el username y contraseña digitado con el de todos los usuarios registrados
			// y si son iguales entra a su sesión.
			// str.equals(str2) devuelve true si la cadena str es igual a la cadena str2
			if (LogUser.getUsername().equals(username.getText()) && LogUser.getPassword().equals(password.getText())) {
				println("Entré");
				info = "El usuario existe!";
				bol = false;
				break;
			}
		}
		if (bol) {
			info = "El usuario no existe!";
		}
	}
	public void hideLogin() {
		username.hide();
		password.hide();
		loginB.hide();
	}
	public void showLogin() {
		username.show();
		password.show();
		loginB.show();
	}
	public void hideRegister() {
		usernameR.hide();
		emailR.hide();
		passwordR.hide();
		cPasswordR.hide();
	}
	public void showRegister() {
		usernameR.show();
		emailR.show();
		passwordR.show();
		cPasswordR.show();
	}
	
	public void controlEvent(ControlEvent theEvent) {
		  println(theEvent.getController().getName());
	}
	public void draw() {
		switch(pantalla) {
		
		//login
		case 0:
			
			background(0);
			image(login2,0,0,365,667);
			text("x:"+mouseX+" y:"+mouseY,mouseX,mouseY);
			text(info,350,500);
		
		break;
		
		//registrar
		case 1:
			
			background(0);
			image(account,0,0,365,667);
			text("x:"+mouseX+" y:"+mouseY,mouseX,mouseY);
			//text(info,350,500);
		
		break;
		
		case 2:
			
			background(0);
			image(home,0,0,365,667);
			text("x:"+mouseX+" y:"+mouseY,mouseX,mouseY);
			//text(info,350,500);
		
		break;
		
		
		}// cierre switch
		
	}// cierre draw
	
	public void mousePressed() {
		
		//pasar a crear cuenta
		if(mouseX>= 145 && mouseX<= 232 && mouseY >= 638 && mouseY <= 647 && pantalla==0){
			
			pantalla=1;
			hideLogin();
			usernameR.show();
			
		}
		
		if(dist(mouseX,mouseY,(float)188,(float)587)<=22 && pantalla==1) {
			 pantalla=2;
		}
		
		
		
		
	}// cierra mousepressed
	
	
	
	
	
	
	
}// cierre main


